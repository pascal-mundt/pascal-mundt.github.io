<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Meine Arbeit – Pascal Mundt</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">

  <style>
    /* ============ Grundlayout ============ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Inter", "Arial", sans-serif;
      color: #2D3C4B;
      background: #52b7c1 url('paper-background.jpeg') repeat center center ;
      background-size: cover;
      min-height: 100vh;
    }

    /* Logo oben rechts */
    .logo {
      background: white;
      position: fixed;
      top: 0px;
      right: 50px;
      text-align: center;
      padding: 2px 10px;
      z-index: 1000;
      color: #2D3C4B;
      font-weight: bold;
      text-decoration: none;
      font-size: 1.2em;
    }
    .logo:hover {
      background: #2D3C4B;
      color: white;
    }

    .back-button {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 999;
      color: #ffffff;
      font-weight: bold;
      font-size: 0.9em;
      text-decoration: none;
      padding: 10px 15px;
      margin: 0;
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
      align-items: center;
    }

    .back-button img {
      height: 20px;
      width: 20px;
      margin-right: 5px;
    }

    .back-button:hover {
      background: #2D3C4B;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    /* Head */
    .head {
      position: relative;
      width: 100%;
      text-align: left;
    }

    .head img {
      display: block;
      width: 100%;
      height: auto;
    }

    .headline {
      position: absolute;
      bottom: 0px;
      margin: auto;
      margin-left: 15px;
      margin-right: 30px;
      left: 10%;
      display: flex;
      flex-wrap: wrap;
      z-index: 99;
    }

    .headline h1{
      font-size: 3em;
      font-weight: 800;
      margin-left: -5px;
      display: flex;
      flex-wrap: wrap;
      text-align: left;
      z-index: 100;
    }

    .headline h1 span {
      background: #2D3C4B;
      color: #ffffff;
      padding: 5px 0px;
      margin-left: -10px;
    }

    .headline h1 span::before {
      content: '';
      background: #2D3C4B;
      padding: 5px 7.5px;
    }

    .headline h1 span::after {
      content: '';
      background: #2D3C4B;
      padding: 5px 7.5px;
    }

    .below-image {
      width: 80%;
      margin: 0 auto 5vh 10%;
    }

    .below-image p {
      margin: 0;
      margin-left: 10px;
      font-weight: bold;
      font-size: 1.8rem;
      display: flex;
      flex-wrap: wrap;
      text-align: left;
    }

    .below-image p span {
      color: #2D3C4B;
      background-color: #ddeef1;
      padding: 5px 0;
      margin-left: -10px;
    }

    .below-image p span::before {
      content: '';
      background: #ddeef1;
      padding: 5px;
    }

    .below-image p span::after {
      content: '';
      background: #ddeef1;
      padding: 5px;
    }

    /* ============ Container für Rubriken ============ */
    .container {
      width: 80%;
      max-width: 1000px;
      margin: 40px auto;
    }

    /* ============ Card-Design ============ */

    /* Cards-Grid: 3 Spalten auf großen Screens */
    .cards-grid {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 20px;
      margin-top: 40px;
    }

    /* Card-Design */
    .card {
      position: relative;
      background: #ffffff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      overflow: hidden; /* Für Fade-Effekt */
      padding: 20px;
      transition: all 0.3s ease;

      /* Animation: Startzustand */
      opacity: 1;
      transform: translateY(50px);
      transition: all 0.6s ease;
    }

    /* Teaser-Text-Fade */
    .card .teaser {
      position: relative;
      max-height: 120px; /* oder so, je nach 300 Zeichen. */
      overflow: hidden;
    }

    .card .teaser::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40px; /* Fade-Höhe */
      background: linear-gradient(to bottom, rgba(255,255,255,0), #fff);
    }

    /* Card, wenn aufgeklappt (volle Breite) */
    .card.expanded {
      grid-column: 1 / -1; /* Nimmt alle Spalten ein */
      width: 90%;         /* Oder 100% - 2rem, wie du magst */
      margin: 0 auto;
    }

    /* Versteckt den Fade-Effekt, wenn expanded */
    .card.expanded .teaser::after {
      display: none;
    }

    /* Mehr-Anzeigen-Button */
    .more-btn {
      display: inline-block;
      background: #2D3C4B;
      color: #fff;
      padding: 5px 10px;
      border-radius: 5px;
      margin-top: 10px;
      cursor: pointer;
      text-decoration: none;
    }

    /* Suchleiste */
    .search-bar {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      border-radius: 25px;
      background: #fff;
      padding: 5px 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      width: 70%;
    }

    .search-input-wrapper {
      display: flex;
      align-items: center;
      flex: 1;
    }

    #search-icon {
      width: 24px;
      height: 24px;
      margin-right: 5px;
    }

    #search-input {
      border: none;
      outline: none;
      flex: 1;
      font-size: 1em;
    }

    #search-btn {
      background: #2D3C4B;
      color: #fff;
      border: none;
      border-radius: 20px;
      padding: 8px 15px;
      cursor: pointer;
      font-weight: bold;
      margin-left: 10px;
    }

    #search-btn:hover {
      background: #1f2a38;
    }

    /* Load More Button */
    .load-more-wrapper {
      text-align: center;
      margin-top: 20px;
    }

    #load-more-btn {
      background: #2D3C4B;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
    }

    #load-more-btn:hover {
      background: #1f2a38;
    }

    /* Wenn Card sichtbar wird 
    .card.show {
      opacity: 1;
      transform: translateY(0); 
    } */

    .card img {
      width: 100%;
      z-index: 5;
    }

    .card h2 {
      font-size: 2em;
      font-weight: 800;
      margin: -25px 0 15px -35px;
      display: flex;
      flex-wrap: wrap;
      text-align: left;
      z-index: 100;
    }

    .card h2 span {
      background: #2D3C4B;
      color: #ffffff;
      padding: 5px 0px;
      margin-left: -10px;
    }

    .card h2 span::before {
      content: '';
      background: #2D3C4B;
      padding: 5px;
    }

    .card h2 span::after {
      content: '';
      background: #2D3C4B;
      padding: 5px;
    }

    .card p {
      line-height: 1.5;
      text-align: justify;
      font-size: 1.2em;
    }
    .card a {
      color: #2D3C4B;
      font-weight: bold;
      text-decoration: none;
    }

    .card a img {
      width: 15px;
      height: 15px;
      margin: 0;
      margin-left: 3px;
      display: inline;
      vertical-align: middle;
     }

    .social-media {
      margin: 20px 0;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      background: #f2f8fa9c;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .social-media a {
      text-decoration: none;
      font-weight: bold;
      color: #2D3C4B;
      font-size: 1.2em;
      display: flex;
      align-items: center;
      padding: 10px;
      margin: 0;
    }

    .social-media p {
          padding: 0;
          margin: 0;
        }

    .social-media a:hover {
      background: #ffffff;
      border-radius: 7px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .social-media a img {
        width: 20px;
        height: 20px;
        margin-right: 3px;
    }

    .social-media p img {
          width: 15px;
          height: 15px;
          margin: 0;
          display: inline;
          vertical-align: middle;
        }

    /* Footer */
    footer {
      margin-top: auto;
      padding: 22px 0;
      background: #2D3C4B;
      font-size: 0.9em;
      display: flex;
      justify-content: center;
    }
    .footer-content {
      width: 80%;
      max-width: 800px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    footer p {
      color: #737986;
      font-weight: bold;
      padding-left: 10px;
    }

    footer a {
      text-decoration: none;
      color: #ffffff;
      font-weight: bold;
      padding-left: 10px;
    }

    footer a:hover {
      color: #bec1c7;
    }

    footer a img {
          width: 15px;
          height: 15px;
          margin: 0;
          margin-left: 3px;
          display: inline;
          vertical-align: middle;
        }

/* – – – – – – Responsive Design – – – – – – */

    @media (max-width: 1000px) {

      .headline h1 {
        font-size: 2.3em;
      }

      .below-image p {
        margin-left: 5px;
        font-size: 1.3em;
      }

      .below-image p span {
        padding: 2.5px 0;
        margin-left: -5px;
      }

      .below-image p span::before {
        padding: 2.5px;
      }

      .below-image p span::after {
        padding: 2.5px;
      }

      .card h2 {
        font-weight: 700;
      }

      .card p {
        font-size: 1em;
      }

      .hero-left p {
        font-size: 1em;
      }

      .social-media a {
        font-size: 1em;
      }
    }
    @media (max-width: 650px) {
      .footer-content,
      .footer-links {
        display: flex;
        flex-direction: column;
      }

      footer p {
        margin: 0 0 10px 0;
      }

      footer a {
        line-height: 2em;
      }
    }

    /* Mobile: 1 Spalte unter 840px */
    @media (max-width: 840px) {
      .card-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 970px) {
      .head {
        position: relative;
        overflow: hidden;
        height: 274px;
      }

      .head img {
        height: 100%;
        object-fit: cover;
        object-position: center;
      }
    }

    @media (max-width: 275px) {
      #hl-h1-2 {
        padding-left: 15px;
      }

      #hl-h1-1 {
        padding-right: 15px;
      }
    }

  </style>
</head>
<body>
  <a class="logo" href="./index">
    <p>Pascal Mundt</p>
  </a>

  <a class="back-button" href="./index">
      <img src="back-arrow.svg" alt="Zurück">Startseite
  </a>

  <!-- head-Bereich -->
  <div class="head">
    <img src="profil-banner.jpeg" alt="Für Oranienburgs Zukunft">
    <div class="headline">
      <h1><span>Meine</span></h1><h1><span>Arbeit</span></h1>
    </div>
  </div>
  <div class="below-image">
    <p>
      <span>Erfahre</span><span>mehr</span><span>über</span><span>meine</span><span>Werte,</span><span>meinen</span><span>beruflichen</span><span>Werdegang,</span><span>mein</span><span>Ehrenamt</span><span>und</span><span>mein</span><span>Privatleben.</span>
    </p>
  </div>

  <!-- Hauptinhalt: Vier Rubriken -->
  <section class="container">
    <!-- Suchleiste -->
    <div class="search-bar">
      <div class="search-input-wrapper">
        <!-- Lupe + Platzhalter "Suche" bei leerem Feld -->
        <img src="lupe.svg" alt="Suche" id="search-icon">
        <input type="text" id="search-input" placeholder="Suche">
      </div>
      <button id="search-btn">Suchen</button>
    </div>

    <div id="cards-grid" class="cards-grid">
      <!-- Hier werden per JavaScript die Cards eingefügt -->
    </div>

    <!-- Mehr laden Button -->
    <div class="load-more-wrapper">
      <button id="load-more-btn">Mehr laden</button>
    </div>

    <div class="social-media">
          <a href="https://instagram.com/pascal.mundt">
                <img src="instagram-icon-dark.svg" alt="Instagram-Icon"><p>@pascal.mundt <img src="link-dark.svg" alt="link"></p>
          </a>
          <a href="https://facebook.com/pascal.mundt.fb">
                <img src="facebook-icon-dark.svg" alt="Facebook-Icon"><p>/pascal.mundt.fb <img src="link-dark.svg" alt="link"></p>
          </a>
          <a href="https://de.linkedin.com/in/pascal-mundt">
            <img src="linkedin-icon-dark.svg" alt="LinkedIn-Icon"><p>/pascal-mundt <img src="link-dark.svg" alt="link"></p>
          </a>
        </div>
    </div>
  </section>
  <footer>
    <div class="footer-content">
      <p>&copy; Pascal Mundt</p>
      <div class="footer-links">
        <a href="./aktuelles">Aktuelles</a>
        <a href="./kontakt">Kontakt</a>
        <a href="https://www.cdu-oranienburg.de">CDU Oranienburg<img src="link.svg" alt="link"></a>
        <a href="./impressum">Impressum</a>
      </div>
    </div>
  </footer>
</body>
<script>
  // IntersectionObserver: Card beim Scrollen einblenden
/*  document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.card');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show');
        }
      });
    }, {
      threshold: 0.1
    });

    cards.forEach(card => {
      observer.observe(card);
    });
  });
*/
  document.addEventListener('DOMContentLoaded', () => {
  const cardsGrid = document.getElementById('cards-grid');
  const loadMoreBtn = document.getElementById('load-more-btn');
  const searchInput = document.getElementById('search-input');
  const searchBtn = document.getElementById('search-btn');

  let articles = [];    // Gesamte Artikelliste
  let filtered = [];    // Gefilterte Artikelliste
  let currentIndex = 0; // Index, wie viele Artikel wir bereits angezeigt haben
  let expandedCard = null; // Referenz auf aktuell geöffnete Card

  // 1) Daten laden
  fetch('articles.json')
    .then(res => res.json())
    .then(data => {
      // Sortieren nach Datum (neu → alt)
      data.sort((a, b) => new Date(b.date) - new Date(a.date));
      articles = data;
      filtered = data; // Anfangs keine Filterung
      renderInitialCards();
    })
    .catch(err => console.error('Fehler beim Laden der JSON:', err));

  // 2) Erste 9 Artikel anzeigen
  function renderInitialCards() {
    currentIndex = 0;
    cardsGrid.innerHTML = ''; // Alte Cards leeren
    showNextNine();
  }

  // 3) Nächste 9 Artikel anzeigen
  function showNextNine() {
    const slice = filtered.slice(currentIndex, currentIndex + 9);
    slice.forEach(article => createCard(article));
    currentIndex += slice.length;

    // Wenn wir weniger als 9 geladen haben oder gar keine mehr, Button ausblenden
    if (currentIndex >= filtered.length) {
      loadMoreBtn.style.display = 'none';
    } else {
      loadMoreBtn.style.display = 'inline-block';
    }
  }

  // 4) Card erstellen
  function createCard(article) {
    // Teaser
    const teaserText = article.fullText.length > 300
      ? article.fullText.substring(0, 300)
      : article.fullText;

    // Card-Element
    const card = document.createElement('div');
    card.classList.add('card');

    card.innerHTML = `
      <img src="${article.titleImage}" alt="${article.title}" class="title-image" />
      <h2>${article.title}</h2>
      <p class="teaser">${teaserText}</p>
      ${article.fullText.length > 300 ? '<button class="more-btn">Mehr anzeigen</button>' : ''}
      <p class="date-info">${formatDate(article.date)}</p>
    `;

    // Füge Card ins Grid ein
    cardsGrid.appendChild(card);

    // "Mehr anzeigen" Button
    const moreBtn = card.querySelector('.more-btn');
    if (moreBtn) {
      moreBtn.addEventListener('click', () => toggleExpand(card, article));
    }
  }

  // 5) Card aufklappen / zuklappen
  function toggleExpand(card, article) {
    // Wenn bereits eine andere Card offen ist, diese schließen
    if (expandedCard && expandedCard !== card) {
      collapseCard(expandedCard);
    }

    // Prüfen, ob Card schon expanded ist
    if (card.classList.contains('expanded')) {
      // Zuklappen
      collapseCard(card);
    } else {
      // Aufklappen
      expandCard(card, article);
    }
  }

  function expandCard(card, article) {
    card.classList.add('expanded');
    card.innerHTML = `
      <img src="${article.titleImage}" alt="${article.title}" class="title-image" />
      <h2>${article.title}</h2>
      <p>${article.fullText}</p>
      <div class="media-area"></div>
      <button class="less-btn">Weniger anzeigen</button>
      <p class="date-info">${formatDate(article.date)}</p>
    `;

    // Media-Bereich -> erst jetzt lazy load
    const mediaArea = card.querySelector('.media-area');
    article.otherMedia.forEach(media => {
      if (isImage(media)) {
        // Bild lazy load
        const img = document.createElement('img');
        img.dataset.src = media; // "vorgemerkt"
        img.alt = 'Zusätzliches Bild';
        img.classList.add('lazy-media');
        mediaArea.appendChild(img);
      } else {
        // Video (z.B. MP4)
        const video = document.createElement('video');
        video.controls = true;
        video.dataset.src = media;
        video.classList.add('lazy-media');
        mediaArea.appendChild(video);
      }
    });

    // Weniger-Anzeigen-Button
    const lessBtn = card.querySelector('.less-btn');
    lessBtn.addEventListener('click', () => collapseCard(card));

    expandedCard = card;

    // Jetzt Lazy-Load-Observer für Bilder/Videos starten
    lazyLoadMedia(card.querySelectorAll('.lazy-media'));
  }

  function collapseCard(card) {
    card.classList.remove('expanded');
    // Teaser wiederherstellen
    const article = filtered.find(a => a.title === card.querySelector('h2').innerText);
    if (!article) return;

    const teaserText = article.fullText.length > 300
      ? article.fullText.substring(0, 300)
      : article.fullText;

    card.innerHTML = `
      <img src="${article.titleImage}" alt="${article.title}" class="title-image" />
      <h2>${article.title}</h2>
      <p class="teaser">${teaserText}</p>
      ${article.fullText.length > 300 ? '<button class="more-btn">Mehr anzeigen</button>' : ''}
      <p class="date-info">${formatDate(article.date)}</p>
    `;

    const moreBtn = card.querySelector('.more-btn');
    if (moreBtn) {
      moreBtn.addEventListener('click', () => toggleExpand(card, article));
    }

    if (expandedCard === card) {
      expandedCard = null;
    }
  }

  // 6) "Mehr laden" Button
  loadMoreBtn.addEventListener('click', showNextNine);

  // 7) Suchfunktion
  searchBtn.addEventListener('click', () => {
    applyFilter();
  });

  // Falls du "live" suchen möchtest, kannst du noch:
  // searchInput.addEventListener('input', applyFilter);

  function applyFilter() {
    const term = searchInput.value.toLowerCase();
    filtered = articles.filter(a =>
      a.title.toLowerCase().includes(term) ||
      a.fullText.toLowerCase().includes(term)
    );
    // Neu rendern
    currentIndex = 0;
    cardsGrid.innerHTML = '';
    showNextNine();
  }

  // 8) Lazy Loading für Bilder/Videos in expanded Card
  function lazyLoadMedia(mediaNodes) {
    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const el = entry.target;
          const src = el.dataset.src;
          if (src) {
            if (el.tagName === 'IMG') {
              el.src = src;
            } else if (el.tagName === 'VIDEO') {
              el.src = src;
            }
            el.removeAttribute('data-src');
          }
          obs.unobserve(el);
        }
      });
    }, { threshold: 0.1 });

    mediaNodes.forEach(node => {
      observer.observe(node);
    });
  }

  // Hilfsfunktionen
  function formatDate(dateStr) {
    const d = new Date(dateStr);
    return d.toLocaleDateString('de-DE', {
      year: 'numeric', month: 'long', day: 'numeric'
    });
  }

  function isImage(path) {
    return /\.(jpg|jpeg|png|gif|webp)$/i.test(path);
  }
});

</script>
</html>
